<app-login-base>
  <div class="flex w-full flex-col justify-center text-center">
    <h1 class="text-xl font-bold">Create account</h1>

    <div class="my-8 flex flex-col gap-3">
      <span class="font-bold">Select the type of your account</span>
      <mat-radio-group aria-label="Select the type of your account" [(ngModel)]="accountType">
        <mat-radio-button
          class="mr-4"
          value="customer"
          color="primary"
          name="accountType"
          >Customer</mat-radio-button
        >
        <mat-radio-button
          color="primary"
          name="accountType"
          value="store"
          >Store</mat-radio-button
        >
      </mat-radio-group>
    </div>

    <div class="flex w-full flex-col gap-4 px-10 sm:px-40 lg:px-10 xl:px-20">
      <form #form="ngForm" class="flex flex-col" (ngSubmit)="register(form)">
        <mat-form-field appearance="fill">
          <mat-label>Name</mat-label>
          <input required [(ngModel)]="user.name" name="name" matInput />
        </mat-form-field>

        <mat-form-field *ngIf="accountType == 'store'" appearance="fill">
          <mat-label>Store description</mat-label>
          <input required [(ngModel)]="storeDescription" name="description" matInput />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>E-mail address</mat-label>
          <input required [(ngModel)]="user.email" name="email" matInput />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Password</mat-label>
          <input required [(ngModel)]="user.password" type="password" name="password" matInput />
        </mat-form-field>

        <div class="text-red-500" *ngIf="formSubmitted && form.invalid">
          <p *ngIf="form.controls['name'].invalid">Name is required!</p>
          <p *ngIf="form.controls['password'].invalid">Password is required!</p>
          <p *ngIf="form.controls['email'].invalid">Email is required!</p>
          <p *ngIf="form.controls['description'].invalid">Description is required!</p>                                      
        </div>
  
        <mat-error *ngIf="submitErrorMessage">{{ submitErrorMessage }}</mat-error>
      </form>

      <div>
        <button
          class="mb-8 rounded-lg lg:mt-4"
          mat-flat-button
          color="primary"
          (click)="form.ngSubmit.emit()"
        >
          Register now
        </button>
      </div>
    </div>
  </div>
</app-login-base>
